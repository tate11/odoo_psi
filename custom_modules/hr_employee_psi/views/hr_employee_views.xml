<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>
		<!-- Top menu item -->
		<menuitem id="hr.menu_hr_reporting_timesheet" name="Reports"
			parent="hr.menu_hr_root" groups="hr.group_hr_manager,hr.group_hr_user"
			sequence="2" />

		<menuitem id="hr.menu_open_view_employee_list_my" action="hr.open_view_employee_list_my"
			parent="hr.menu_hr_root" sequence="1" />

		<menuitem id="hr.menu_human_resources_configuration" name="Configuration"
			parent="hr.menu_hr_root" groups="hr.group_hr_manager" sequence="101" />

		<menuitem action="hr.open_module_tree_department" id="hr.menu_hr_department_tree"
			parent="hr.menu_hr_root" sequence="0" groups="hr.group_hr_user" />

		<!-- Form declaration -->
		<record id="view_action_add_declaration" model="ir.ui.view">
			<field name="name">hr.declaration.interest.form</field>
			<field name="model">hr.declaration.interest</field>
			<field name="arch" type="xml">
				<form string="Declaration d'intérêt">
					<div class="oe_title">
						<span for="name" class="oe_edit_only" />
						<h1>
							<field name="name" placeholder="Nom du déclaration" />
						</h1>
					</div>
					<group>
						<group>
							<field name="employee_id" />
							<field name="b_edit" invisible="1" />
						</group>
						<group>
							<field name="year" />
							<field name="declaration_interet_filename" invisible="1" />
							<field name="declaration_interet" filename="declaration_interet_filename" />
						</group>
					</group>
				</form>
			</field>
		</record>
		<!-- Form declaration -->
		<record id="hr_information_cin_form" model="ir.ui.view">
			<field name="name">hr.information.cin.form</field>
			<field name="model">hr.information.cin</field>
			<field name="arch" type="xml">
				<form string="Information sur CIN">
					<group>
						<group>
							<field name="name" />
							<field name="place_of_issue" />
							<field name="duplicata" />
						</group>
						<group>
							<field name="date_of_issue" />
							<field name="end_of_validity" />
							<field name="date_of_duplicata" />
						</group>
					</group>
				</form>
			</field>
		</record>
		<!-- cours d'ethique -->
		<record id="view_action_add_cours_ethique" model="ir.ui.view">
			<field name="name">hr.cours.ethique.form</field>
			<field name="model">hr.cours.ethique</field>
			<field name="arch" type="xml">
				<form string="Cours d'étique">
					<div class="oe_title">
						<span for="name" class="oe_edit_only" />
						<h1>
							<field name="name" placeholder="Nom du cours d'éthique" />
						</h1>
					</div>
					<group>
						<group>
							<field name="employee_id" />
							<field name="b_edit" invisible="1" />
						</group>
						<group>
							<field name="year" />
							<field name="certificate_ethics_filename" invisible="1" />
							<field name="certificate_ethics_file" filename="certificate_ethics_filename" />
						</group>
					</group>
				</form>
			</field>
		</record>
		<!-- Action add declaration -->
		<record id="action_add_declaration" model="ir.actions.act_window">
			<field name="name">Ajouter une déclaration d'intérêt</field>
			<field name="res_model">hr.declaration.interest</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_action_add_declaration" />
			<field name="target">new</field>
			<field name="context">{'default_employee_id': active_id}</field>
		</record>
		<!-- Action add cours ethique -->
		<record id="action_add_cours_ethique" model="ir.actions.act_window">
			<field name="name">Ajouter un cours d'étique</field>
			<field name="res_model">hr.cours.ethique</field>
			<field name="view_type">form</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="view_action_add_cours_ethique" />
			<field name="target">new</field>
			<field name="context">{'default_employee_id': active_id}</field>
		</record>
		<record id="hr_hr_employee_view_form_psi" model="ir.ui.view">
			<field name="name">hr.hr.employee.view.form.psi</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='name']" position="replace">
					<field name="name" placeholder="Nom et prénom(s) de l'employé"
						string="Nom et prénom(s)" />
				</xpath>
				<xpath expr="//field[@name='calendar_id']" position="attributes">
					<attribute name="string">Horaire de travail</attribute>
				</xpath>
				<notebook>
					<page string="Pièces à fournir">
						<group col="1">
							<group col="2">
								<field name="state" invisible="1" />
								<div style="margin:5px">
									<field name="personal_information" nolabel="1" />
									<span>Fiche de renseignements personnels</span>
								</div>
								<div style="margin:5px">
									<field name="id_photos" nolabel="1" />
									<span>Photo d'identité</span>
								</div>
								<div style="margin:5px">
									<field name="certificate_residence" nolabel="1" />
									<span>Certificat de résidence</span>
								</div>
								<div style="margin:5px">
									<field name="marriage_certificate" nolabel="1" />
									<span>Acte de mariage ou copie de livret de famille</span>
								</div>
								<div style="margin:5px">
									<field name="cin" />
									<span>CIN</span>
								</div>
								<div style="margin:5px">
									<field name="work_certificate" nolabel="1" />
									<span>Copies certificats de travail</span>
								</div>
								<div style="margin:5px">
									<field name="qualifications" nolabel="1" />
									<span>Copies diplômes</span>
								</div>
								<div style="margin:5px">
									<field name="criminal_records" nolabel="1" />
									<span>Casier judiciaires</span>
								</div>
								<div style="margin:5px">
									<field name="card_cnaps" nolabel="1" />
									<span>Copie carte CNaPS</span>
								</div>
								<div style="margin:5px">
									<field name="birth_certificate_children" nolabel="1" />
									<span>Acte de naissance des enfants</span>
								</div>
							</group>
							<br />
							<div>

								<span>
									<b>Déclaration de conflit d'interêt</b>
								</span>
								<field name="details_declaration_interet" string="Déclaration d'interêt">

									<tree delete="false">
										<field name="name" />
										<field name="date_add" />
										<field name="year" />
									</tree>
								</field>
							</div>
							<div>

								<span>
									<b>Certificat de cours d'éthique</b>
								</span>
								<field name="details_cours_ethique" string="Cours d'étique">
									<tree delete="false">
										<field name="name" />
										<field name="date_add" />
										<field name="year" />
									</tree>
								</field>
							</div>
						</group>
					</page>
					<page string="Sanctions">
						<group>
							<field name="sanctions_data" nolabel="1">
								<tree string="" editable="bottom">
									<field name="sanction_date" />
									<field name="sanction_type_id" />
									<field name="sanction_objet" />
									<field name="sanction_commentaire" />
								</tree>
							</field>
						</group>
					</page>
					<page string="Bridger">
						<group>
							<field name="psi_bridger_insight" nolabel="1">
								<tree string="" editable="bottom">
									<field name="date" />
									<field name="result" />
								</tree>
							</field>
						</group>
					</page>
				</notebook>
				<xpath expr="//field[@name='country_id']/../../.." position="replace">
					<page name="information_personnelle" string="Informations personnelles"
						groups="hr.group_hr_user">
						<group col="2">
							<group string="Etat civil">
								<field name="matricule" required="1" />
								<field name="civility"/>
								<field name="psi_name" string='Nom et prénom(s)' />
								<field name="birthday" string='Date de naissance' />
								<field name="nationality" string="Nationalité"/>
								<field name="sexe" string="Sexe" />
								<field name="father_name" string='Nom du père' />
								<field name="mother_name" string='Nom de la mère' />
								<field name="information_cin_id" string='Information sur CIN' />
								<field name="passport_id" string='Numéro passeport' />
								<field name="marital" string="Situation matrimoniale" />
								<field name="conjoint_s_name" string="Nom du conjoint" />
								<field name="spouse_s_name" string="Nom de l'époux (se)" />
								<field name="information_about_children_id">
									<tree editable="bottom">
										<field name="name" />
										<field name="date_of_birth" />
										<field name="sex" />
										<field name="relation" invisible="1" />
									</tree>
								</field>
							</group>
							<group string="Informations de contact">
								<field name="address_home_id" string='Adresse personnelle' />
								<field name="personal_phone" string='Téléphone portable personnel' />
								<field name="personal_fixed_phone" string='Téléphone fixe personnel' />
								<field name="emergency_contact_id" string="Personne à contacter d'urgence" />
								<field name="beneficiary_of_death_benefit_id" string="Bénéficiaire d'indemnité en cas de décès" />
							</group>
							<group string="Autres informations">
								<field name="bank_account_id" string='Numéro compte bancaire' />
								<field name="cnaps_number" string="Numéro CNaPS" />
								<field name="groupe_sanguin" string="Groupe sanguin" />
							</group>
						</group>
					</page>
				</xpath>

				<div name="button_box" position="inside">
					<button name="action_get_attachment_tree_view" class="oe_stat_button"
						icon="fa-book" type="object">
						<field name="attachment_number" widget="statinfo" string="Documents"
							modifiers="{'readonly': true}" />
					</button>
				</div>
				<!-- Collaborator close - READONLY -->

				<xpath expr="/form " position="attributes">
					<attribute name="attrs">{'readonly': [('state','=','close')]}
					</attribute>
				</xpath>

				<field name='job_id' position="after">
					<field name="psi_budget_code_distribution" widget="many2many_tags">
						<field name="name" />
						<field name="employee_id" />
						<field name="analytic_account_parent_id" />
						<field name="analytic_account_id" />
						<field name="taux" />
					</field>
				</field>
				<field name='coach_id' position="replace">
					<field name="coach_id" string="Supérieur Hiérarchique" />
				</field>
				<field name="department_id" position="replace">
					<field name="department_id_psi" />
				</field>
				<field name="department_id_psi" position="after">
					<field name="psi_category_details" string='Catégorie professionnelle' />
				</field>

			</field>
		</record>
		<record id="hr_hr_employee_view_form2_inherited" model="ir.ui.view">
            <field name="name">hr.hr.employee.view.form2.inherited</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr_contract.hr_hr_employee_view_form2"/>
            <field name="arch" type="xml">
        		<xpath expr="//field[@name='children']" position="replace">
				</xpath>
				<xpath expr="//field[@name='marital']" position="before">
					<field name="children" />
				</xpath>
        	</field>
    	</record>
		<record id="hr_contract_type_view_form" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.form</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<form string="Liste des sanctions">
					<group col="4">
						<field colspan="4" name="name" />
					</group>
				</form>
			</field>
		</record>
		<record id="hr_contract_sanction_view_tree" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.tree</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<tree string="Liste des sanctions">
					<field colspan="4" name="name" />
				</tree>
			</field>
		</record>
		<!-- ACTIONS -->
		<record id="action_hr_contract_type_sanction" model="ir.actions.act_window">
			<field name="name">Liste de type de sanctions</field>
			<field name="res_model">hr.contract.type.sanction</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="hr_contract_sanction_view_tree" />
		</record>


		<record id="hr_contract_sanction_list_view_tree" model="ir.ui.view">
			<field name="name">hr.contract.list.sanction.tree</field>
			<field name="model">hr.contract.sanction.data</field>
			<field name="arch" type="xml">
				<tree string="Liste des sanctions">
					<field name="employee_id" string="Employé" />
					<field name="name" />
					<field name="sanction_type_id" />
					<field name="sanction_date" />
				</tree>
			</field>
		</record>

		<record id="hr_contract_sanction_list_view_form" model="ir.ui.view">
			<field name="name">hr.contract.list.sanction.tree</field>
			<field name="model">hr.contract.sanction.data</field>
			<field name="arch" type="xml">
				<form string="Liste des sanctions">
					<field name="employee_id" />
					<field name="sanction_type_id" />
					<field name="sanction_date" />
				</form>
			</field>
		</record>

		<record id="hr_contract_sanction_view_search" model="ir.ui.view">
			<field name="name">hr.contract.search</field>
			<field name="model">hr.contract.sanction.data</field>
			<field name="arch" type="xml">
				<search string="Search Sanction">
					<field name="sanction_date" />
					<!-- <field name="sanction_date_month"/> <field name="sanction_date_year"/> -->
					<group expand="0" string="Group By">
						<filter string="Employee" domain="[]"
							context="{'group_by':'employee_id'}" />
						<filter string="Type de Sanction" domain="[]"
							context="{'group_by':'sanction_type_id'}" />
					</group>
				</search>
			</field>
		</record>
		<record id="action_hr_contract_list_sanction" model="ir.actions.act_window">
			<field name="name">Liste des employés sanctionnés</field>
			<field name="res_model">hr.contract.sanction.data</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="hr_contract_sanction_list_view_tree" />
			<field name="search_view_id" ref="hr_contract_sanction_view_search" />
		</record>

		<record id="hr_contract_sanction_view_tree" model="ir.ui.view">
			<field name="name">hr.contract.type.sanction.tree</field>
			<field name="model">hr.contract.type.sanction</field>
			<field name="arch" type="xml">
				<tree string="Liste des sanctions">
					<field colspan="4" name="name" />
				</tree>
			</field>
		</record>
		<!--Search in hr.employee -->
		<record id="hr_employee_filter_inherit" model="ir.ui.view">
			<field name="name">hr.employee.filter.inherit</field>
			<field name="model">hr.employee</field>
			<field name="inherit_id" ref="hr.view_employee_filter" />
			<field name="arch" type="xml">
				<xpath expr="filter[@name='message_needaction']" position="after">
					<filter string="Profil non complet"
						domain="['|','|','|','|','|','|', ('personal_information','=',False),('id_photos','=',False),('certificate_residence','=',False),('marriage_certificate','=',False),
('cin','=',False),('work_certificate','=',False),('qualifications','=',False),('criminal_records','=',False),
('card_cnaps','=',False),('birth_certificate_children','=',False),('ethics_course_certificate','=',False)]" />
					<filter string="Profil complet"
						domain="['&amp;','&amp;','&amp;','&amp;','&amp;','&amp;', ('personal_information','=',True),('id_photos','=',True),('certificate_residence','=',True),('marriage_certificate','=',True),
('cin','=',True),('work_certificate','=',True),('qualifications','=',True),('criminal_records','=',True),
('card_cnaps','=',True),('birth_certificate_children','=',True),('ethics_course_certificate','=',True)]" />
				</xpath>
				<xpath expr="//field[@name='department_id']" position="after">
					<filter string="CDD vs CDI" icon="terp-personal+" domain="[]"
						context="{'group_by':'psi_contract_type'}" />
					<filter string="Bailleur/Projet" icon="terp-personal+"
						domain="[]" context="{'group_by':'psi_budget_code_distribution'}" />
				</xpath>
			</field>
		</record>

		<record id="view_provider_schedules_form" model="ir.ui.view">
			<field name="name">Horaires prestataires</field>
			<field name="model">hr.employee.provider.schedule</field>
			<field name="arch" type="xml">
				<form string="Horaires prestataires">
					<sheet>
						<group>
							<group>
								<field name="name" required="1" />
							</group>
							<group>
								<field name="hours" string="Time Spent" widget="float_time" />
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_horaires_collaborateurs_tree" model="ir.ui.view">
			<field name="name">Horaires collaborateurs</field>
			<field name="model">resource.calendar</field>
			<field name="arch" type="xml">
				<tree string="Liste des horaires collaborateurs">
					<field name="name" />
				</tree>
			</field>
		</record>
		
		<record id="action_horaires_collaborateurs" model="ir.actions.act_window">
			<field name="name">Horaires collaborateurs</field>
			<field name="res_model">resource.calendar</field>
			<field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
			<field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Nouveau horaires collaborateurs.
              </p>
            </field>
		</record>

		<record id="view_provider_schedules_list" model="ir.ui.view">
			<field name="name">Horaires prestataires</field>
			<field name="model">hr.employee.provider.schedule</field>
			<field name="arch" type="xml">
				<tree string="Liste des horaires prestataires " editable="top">
					<field name="name" />
					<field name="hours" widget="float_time" />
				</tree>
			</field>
		</record>

		<record id="action_provider_schedules" model="ir.actions.act_window">
			<field name="name">Horaires prestataires</field>
			<field name="res_model">hr.employee.provider.schedule</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="view_provider_schedules_list" />
		</record>
		
		
		<!-- MENUS -->
		<menuitem id="hr_menu_employee_horaires_collaborateurs" parent="hr_contract_psi.hr_menu_contract_psi_config"
			sequence="7" name="Horaires collaborateurs" action="action_horaires_collaborateurs" />

		<menuitem id="hr_menu_employee_provider_schedules" parent="hr_contract_psi.hr_menu_contract_psi_config"
			sequence="8" name="Horaires prestataires" action="action_provider_schedules" />

		<menuitem id="hr_menu_contract_type_sanction_root" parent="hr.menu_hr_root"
			sequence="5" name="Sanctions" />
		<menuitem id="hr_menu_contract_type_sanction" action="action_hr_contract_type_sanction"
			parent="hr_menu_contract_type_sanction_root" sequence="5" />
		<menuitem id="hr_menu_contract_liste_employee_sanctione"
			action="action_hr_contract_list_sanction" parent="hr_menu_contract_type_sanction_root"
			sequence="6" />

	</data>
</odoo>